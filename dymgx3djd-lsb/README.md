# 台区评分系统

这是一个用于台区评分和相关性分析的 Python 工具集。

## 功能模块

### 1. 自动评分系统 (auto_scoring_system.py)

- 提供台区自动评分功能
- 包含多个评分维度和规则
- 支持 JSON 格式的台区数据输入

### 2. 单台区评分助手 (single_scoring_helper.py)

- 对单个台区进行评分
- 生成详细的评分报告
- 支持 CSV 格式输出

### 3. 散点图生成器 (generate_scatter_plots.py)

- 生成各维度的散点图
- 支持中文字体显示
- 提供数据分布分析

## 安装依赖

```bash
pip install -r requirements.txt
```

## 项目结构

```
newCode/
├── README.md                    # 项目说明文档
├── config.py                    # 配置文件
├── auto_scoring_system.py       # 自动评分系统核心模块
├── single_scoring_helper.py     # 单台区评分助手
├── generate_scatter_plots.py    # 散点图生成器
├── requirements.txt             # 依赖包列表
├── data/                        # 数据目录
│   ├── *.csv                   # 评分数据文件
│   └── *.json                  # 台区JSON数据文件
├── fonts/                       # 字体目录
│   └── SimHei.ttf              # 中文字体文件
└── output/                      # 输出目录
    ├── charts/                 # 图表输出
    │   └── scatter_plots/      # 散点图
    └── single_results/         # 单台区评分结果
```

## 配置说明

在使用前，请根据您的实际情况修改 `config.py` 文件中的路径配置：

1. **数据目录**: 设置机器评分、人工评分和台区 JSON 数据的文件路径
2. **输出目录**: 设置各种分析结果的输出目录
3. **字体配置**: 设置中文字体路径（用于图表显示）

## 使用方法

### 单台区评分

```bash
# 直接运行脚本进行单台区评分
python single_scoring_helper.py
```

或在 Python 代码中调用：

```python
from single_scoring_helper import score_single_taiqu

# 对单个台区进行评分
results = score_single_taiqu('path/to/taiqu.json')
```

### 批量自动评分

```bash
# 运行自动评分系统，对所有台区进行评分
python auto_scoring_system.py
```

### 生成散点图

```bash
# 生成机器评分与人工评分的散点图对比
python generate_scatter_plots.py
```

## 数据格式要求

### 台区 JSON 数据

- 包含台区基本信息和各项指标数据
- 格式需符合 AutoScoringSystem 的要求

### 机器评分 CSV

- 必须包含'台区 ID'列
- 包含各评分维度的数值列

### 人工评分 CSV

- 必须包含'台区 ID'列
- 包含对应的人工评分数据

## 输出结果

- **单台区评分**: CSV 格式的详细评分结果，保存在 `output/single_results/` 目录
- **散点图**: 各维度的机器评分 vs 人工评分散点图，保存在 `output/charts/scatter_plots/` 目录

## 注意事项

1. 确保所有数据文件路径在 config.py 中正确配置
2. 首次运行时会自动下载中文字体文件到 `fonts/` 目录
3. 所有输出目录会自动创建
4. 建议在运行前检查数据文件的编码格式（推荐 UTF-8）
5. 项目已配置中文输出，所有日志和结果均为中文显示

## 现在要做的

这是目前的成果，有示例，杆塔，墙支架，分支箱已经做好了，你可以尝试做一下电缆终端头起点、末端、或者电缆段的打分优化。

打分分为人工打分和机器 AI 评分，目的是为了让 AI 的评价能力跟人一致。

图形分为治理前的图形，人工评分较低，和治理后的图形，人工评分较高，图形中包含 11 个设备类型，杆塔，分支箱，低压综合配电箱，电缆终端头起点、电缆终端头末端、电缆段、接入点、连接线、接入点、墙支架、表箱，还有个第 12 综合得分项；
这些图都有标注了。
目前的训练是让 AI 给图形打分，目标让 AI 的打分接近人工的打分，因为人工的经验打分是准确的，如果 AI 的打分接近了人工的打分结果，说明 AI 对美观性的认知接近人了

听起来要 computer vision 啊

嗯，在 github 上有标注好的数据

用的是 QW-MAX-VL-2.5

相关性只有 10%到 30%，需要提升到 80%以上。目前用的是传统的人工写的代码逻辑告诉 AI 每个设备什么样是好的，什么样是不好的。github 里 🈶 示例，可以用别的评估方法，你认为可行的都可以尝试，先测试一两个，找到有效果的方法

分支箱、杆塔代码已经调到 AI 和人工评分已经做到 80%相关性了

里面有分支箱杆塔的例子

你做电缆段的相关性提升

目前人工打分跟机器打分的相关性只有 30%，提高到 80%

杆塔已经做好了，有例子，你看下

让机器打分跟人的打分一致

让机器知道什么是好的，什么是不好的

机器也给图打分，
人工已经打过分了，人工打的分是标准
我们要做的是让机器也能打出来接近人的分辨能力

看杆塔的，有示例，杆塔那个机器评分已经接近人的评分的 87%了。

你就模仿杆塔、分支箱的做法，把电缆段、档距段，两个分项提升到 80%以上，到明天晚上完成。

图在 data1 里

# 三维建筑物压平为二维展示细化考题说明

## 一、背景与实际场景

在电网台区治理、城市GIS系统等场景中，地图展示通常采用二维视图（如国网地图：https://map.sgcc.com.cn/），但原始数据或图片中建筑物往往以三维形式（有高度、立体感）存在。为了便于地图加载、空间分析和可视化，需要将三维建筑物压平为二维地面投影。

## 二、基础需求

**请实现一个Python程序，将图片或空间数据中的三维建筑物信息压平为二维地面展示。**

### 已知条件
- 输入为一张遥感/航拍图片，或类似国网地图的空间数据。
- 可以通过像素颜色通道、分割算法等**提取出建筑物的楼顶区域及其边缘坐标**。
- 每个建筑物的楼顶区域可用一组二维像素点（或地理坐标点）表示。

## 三、细化任务要求
1. **输入数据说明**
   - 一张包含建筑物的图片（如PNG/JPG），或一组已提取的建筑物楼顶边界点（二维坐标）。
   - 可选：每个建筑物的高度信息（如有）。
2. **输出数据说明**
   - 每个建筑物的二维投影区域（多边形），即压平到地面的轮廓坐标。
   - 可选：输出为GeoJSON、Shapefile、或简单的JSON坐标列表。
3. **核心算法要求**
   - 通过颜色通道/分割算法，自动提取建筑物楼顶区域。
   - 将三维信息（如有高度）忽略，仅保留楼顶边界的二维坐标。
   - 支持多建筑物批量处理。
4. **地图加载与展示建议**
   - 输出的二维多边形数据应能直接用于地图系统（如国网地图：https://map.sgcc.com.cn/）的矢量图层加载。
   - 可选：提供简单的可视化脚本，展示压平后的建筑物轮廓在地图底图上的叠加效果。
5. **可选加分项**
   - 支持将提取的二维建筑物轮廓导出为GeoJSON文件，便于Web地图加载。
   - 支持与真实地理坐标（如经纬度）对齐。
   - 支持批量处理多张图片或多组建筑物数据。

## 四、参考实现思路
- **图像分割**：用OpenCV、Pillow等库，基于颜色阈值、边缘检测等方法提取楼顶区域。
- **轮廓提取**：用cv2.findContours等方法获取每个建筑物的边界点。
- **坐标转换**：如有地理参考信息，将像素坐标转换为地理坐标。
- **数据导出**：将每个建筑物的二维轮廓保存为GeoJSON或JSON格式。
- **地图加载**：可用Leaflet、OpenLayers等WebGIS工具加载GeoJSON，或参考国网地图的矢量图层加载方式。

## 五、评判标准建议
- 能否自动、准确地提取建筑物楼顶区域并输出二维轮廓。
- 输出数据格式是否规范、易于地图系统加载。
- 代码结构清晰、注释完善，能在1小时内写出初步思路和核心代码。
- （加分）支持地理坐标对齐、批量处理、可视化等扩展功能。

## 六、参考文档/资料
- 国网地图：https://map.sgcc.com.cn/（可参考其建筑物矢量图层加载方式）
- OpenCV官方文档：https://docs.opencv.org/
- GeoJSON格式说明：https://geojson.org/

# 电网台区美化治理与打分系统

**Phase 1 基础框架** - 基于大模型的端到端自动化台区治理系统

## ⚡ 快速开始

### 1. 使用uv配置环境

```bash
# 克隆项目到本地
git clone <your-repo-url>
cd dy_gis_mgx

# 使用uv安装依赖
uv sync

# 可选：安装开发依赖（包含wandb）
uv sync --extra dev
```

### 2. 环境变量配置（可选）

```bash
# 可选：设置千问API密钥（不设置将使用模拟模式）
# Windows PowerShell
$env:QWEN_API_KEY="your-qwen-api-key"

# Linux/macOS
export QWEN_API_KEY="your-qwen-api-key"
```

### 3. 运行演示

```bash
# 推荐：使用封装的运行脚本
python run_demo.py

# 或者：直接运行主程序
python main.py
```

## 🎯 核心功能

- **输入**: 结构化GIS数据（设备坐标、地形要素等）
- **处理**: 大模型基于数据进行自动化治理 + 美观性打分  
- **输出**: 治理后的结构化数据 + 详细评分报告
- **追踪**: 成本分析 + 完整日志
- **并行**: 支持批量处理

## 📊 演示结果

运行演示后你将看到：

1. **模型信息**: 可用模型列表和定价信息
2. **单图处理**: 
   - 美观性评分: 85.5/100
   - 处理时间: ~0.20秒  
   - 处理成本: ~$0.002360
3. **批量处理**: 
   - 3台区并行处理
   - 100%成功率
   - 总耗时: ~0.61秒

## 🏗️ 架构特点

- **数据驱动**: 处理结构化GIS坐标数据，而非像素级图像
- **模型无关**: 统一接口支持多种大模型（当前支持千问）
- **成本透明**: 完整的token使用和费用追踪
- **类型安全**: 使用dataclass和类型提示
- **可扩展**: 新增模型只需继承BaseModel

## 📁 项目结构

```
project/
├── main.py                 # 主入口程序
├── run_demo.py             # 演示运行脚本
├── src/
│   ├── core/               # 核心业务逻辑
│   │   ├── data_types.py   # 数据类型定义
│   │   └── ...
│   ├── models/             # 大模型接口
│   │   ├── base_model.py   # 模型基类
│   │   ├── qwen_model.py   # 千问模型实现
│   │   └── ...
│   └── utils/              # 工具模块
├── pyproject.toml          # 依赖配置
└── README.md               # 项目说明
```

## 📋 当前状态

| 模块 | 完成度 | 状态 |
|------|--------|------|
| 🟢 核心数据结构 | 100% | ✅ 完成 |
| 🟢 千问模型集成 | 100% | ✅ 完成 |
| 🟢 处理流程框架 | 95% | ✅ 完成 |
| 🟢 成本计算系统 | 100% | ✅ 完成 |
| 🟡 可视化工具 | 0% | 🚧 待实现 |
| 🟡 WandB追踪 | 10% | 🚧 待实现 |
| 🟡 其他模型 | 20% | 🚧 待实现 |

## 📖 详细文档

更多详细信息请查看 [src/README.md](src/README.md)

---

**Version**: Phase 1 Complete  
**Date**: 2025-08-04
